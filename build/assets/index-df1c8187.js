import{r as a,u as y,F as G,E as M,W as P,j as e,m as p,D as E}from"./vendor-373470ad.js";import{u as B,Q as I}from"./QueryTrigger-cd97c1b5.js";import{g as L}from"./moviesIDBService-2b8b2360.js";import{M as S}from"./MovieList-20030c82.js";import{M as V}from"./MovieCard-079a6a29.js";import{G as k}from"./GoBackButton-1a33da40.js";import{G as Q}from"./index-22f69c02.js";import{p as T,i as $}from"./animations-5f4924b3.js";import"./index-e2daedf6.js";import"./DefaultMovieImage-d6b5fbbf.js";const w=()=>{var x;const[i,u]=a.useState([]),[o,l]=a.useState(0),t=y(),g=G(),{genreID:d}=g,{ref:h,inView:n}=B({threshold:.1}),{data:r,error:j,fetchNextPage:v,isLoading:m,isError:c,isSuccess:f}=M(["moviesByGenre",{genreID:d}],L,{staleTime:6e4,cacheTime:6e4,getNextPageParam:s=>{if(!(typeof s=="object"&&s.nextPage>s.totalPages))return s.nextPage}});return a.useEffect(()=>{i.length!==0&&n&&v()},[n]),a.useEffect(()=>{f&&(r!=null&&r.pages[o])&&(u([...i,...r.pages[o].results]),l(o+1)),c&&P.error(`Error: ${j.response.data.message}`)},[r,c,f]),m?e.jsx(Q,{}):e.jsxs(e.Fragment,{children:[e.jsxs(p.div,{initial:"closed",animate:"open",exit:"exit",variants:T,children:[t.state&&e.jsx(k,{path:((x=(t==null?void 0:t.state).from)==null?void 0:x.location)??"/"}),i.length>0&&!m&&e.jsx(S,{children:i.map(s=>e.jsx(p.li,{initial:"closed",animate:"open",exit:"exit",variants:$(),children:e.jsx(E,{to:`/movies/${s.id}`,state:{from:{location:t}},children:e.jsx(V,{movie:s})})},s.id))})]}),e.jsx(I,{ref:h})]})},H=w;export{H as default};
