{"version":3,"file":"static/js/reviews.a92030b8.chunk.js","mappings":"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","sources":["components/Notify/Notify.styled.jsx","components/Notify/Notify.jsx","components/Reviews/Reviews.styled.jsx","components/Reviews/Reviews.jsx","services/moviesIDBService.js"],"sourcesContent":["import styled from '@emotion/styled';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst Wrap = styled(motion.div)`\r\n  width: 100%;\r\n  border-radius: 5px;\r\n`;\r\n\r\nexport default Wrap;\r\n","import PropTypes from 'prop-types';\r\nimport Wrap from './Notify.styled';\r\nimport { textVariants } from 'animations';\r\n\r\nconst Notify = ({ children, delay = 0 }) => (\r\n  <Wrap initial={'closed'} animate={'open'} variants={textVariants(delay)}>\r\n    {children}\r\n  </Wrap>\r\n);\r\n\r\nNotify.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  padding: PropTypes.string,\r\n};\r\n\r\nexport default Notify;\r\n","import styled from '@emotion/styled';\r\nimport { device } from 'deviceSizes';\r\n\r\nexport const List = styled.ul`\r\n  width: 85vw;\r\n  padding: 10px 5px;\r\n\r\n  @media ${device.tablet} {\r\n    width: 100%;\r\n    margin: 0 auto;\r\n    padding: 0;\r\n  }\r\n\r\n  @media ${device.laptop} {\r\n    width: 70%;\r\n  }\r\n`;\r\n\r\nexport const Item = styled.li`\r\n  display: block;\r\n  padding: 5px;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  background-color: ${props => props.theme.bgCastCard};\r\n  border-radius: 5px;\r\n  & + & {\r\n    margin-top: 10px;\r\n  }\r\n\r\n  & > div:first-child {\r\n    min-width: 100px;\r\n  }\r\n\r\n  @media ${device.tablet} {\r\n    display: flex;\r\n    padding: 20px;\r\n  }\r\n`;\r\n\r\nexport const AvatarContainer = styled.div`\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nexport const Avatar = styled.img`\r\n  margin: 0 auto;\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 50%;\r\n`;\r\n\r\nexport const Info = styled.div`\r\n  width: 100%;\r\n  & p + p {\r\n    margin-top: 5px;\r\n  }\r\n\r\n  @media ${device.tablet} {\r\n    width: 95%;\r\n  }\r\n`;\r\n\r\nexport const Date = styled.p`\r\n  font-size: 20px;\r\n`;\r\n\r\nexport const Name = styled.p`\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n`;\r\n","import { useInfiniteQuery } from 'react-query';\r\nimport { useParams } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport SentimentVeryDissatisfiedIcon from '@mui/icons-material/SentimentVeryDissatisfied';\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport ThreeDots from 'components/Loaders/Loader';\r\nimport Notify from 'components/Notify';\r\nimport { movieReviews } from 'services/moviesIDBService';\r\nimport {\r\n  List,\r\n  Item,\r\n  AvatarContainer,\r\n  Avatar,\r\n  Info,\r\n  Date,\r\n  Name,\r\n} from './Reviews.styled';\r\nimport { FaUserCircle } from 'react-icons/fa';\r\n\r\nconst Reviews = () => {\r\n  const { movieId } = useParams();\r\n\r\n  const {\r\n    data,\r\n    error,\r\n    isLoading,\r\n    isError,\r\n    isSuccess,\r\n    fetchNextPage,\r\n    hasNextPage,\r\n  } = useInfiniteQuery(['movieReviews', { movieId }], movieReviews, {\r\n    getNextPageParam: pages => {\r\n      if (pages.nextPage > pages.totalPages) {\r\n        return undefined;\r\n      }\r\n      return pages.nextPage;\r\n    },\r\n    staleTime: 60000,\r\n    cacheTime: 60000,\r\n  });\r\n\r\n  if (isLoading) {\r\n    return <ThreeDots />;\r\n  }\r\n\r\n  if (isError) {\r\n    return toast.error(`Ошибка: ${error.message}`);\r\n  }\r\n\r\n  if (isSuccess) {\r\n    if (data.pages[0].results.length === 0) {\r\n      return (\r\n        <Notify>\r\n          <h2>We don't have any reviews for this movie</h2>\r\n          <SentimentVeryDissatisfiedIcon sx={{ fontSize: 70, mt: 1 }} />\r\n        </Notify>\r\n      );\r\n    }\r\n\r\n    console.log(data);\r\n    return (\r\n      <InfiniteScroll hasMore={hasNextPage} loadMore={fetchNextPage}>\r\n        {data.pages.map(({ results, nextPage }) => (\r\n          <List key={`id${nextPage}`}>\r\n            {results.map(\r\n              ({ author, content, created_at, id, author_details }) => {\r\n                const { avatar_path } = author_details;\r\n                let formattedPath = null;\r\n                if (avatar_path) {\r\n                  formattedPath = avatar_path.replace('/', '');\r\n                }\r\n                return (\r\n                  <Item key={id}>\r\n                    <div>\r\n                      <AvatarContainer>\r\n                        {avatar_path &&\r\n                        formattedPath.includes('www.gravatar.com') ? (\r\n                          <Avatar src={formattedPath} alt=\"User avatar\" />\r\n                        ) : (\r\n                          <FaUserCircle size=\"60\"></FaUserCircle>\r\n                        )}\r\n                      </AvatarContainer>\r\n                    </div>\r\n                    <Info>\r\n                      <Date>{created_at.substr(0, 10)}</Date>\r\n                      <Name>{author}</Name>\r\n                      <p>{content}</p>\r\n                    </Info>\r\n                  </Item>\r\n                );\r\n              }\r\n            )}\r\n          </List>\r\n        ))}\r\n      </InfiniteScroll>\r\n    );\r\n  }\r\n};\r\n\r\nexport default Reviews;\r\n","import axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst baseURL = 'https://api.themoviedb.org/3/';\r\nconst key = '105ba628fde77462ee84526f3393a31c';\r\n\r\nexport async function fetchTrendmovies() {\r\n  const response = await axios.get(\r\n    `${baseURL}trending/movie/day?api_key=${key}`\r\n  );\r\n  return response.data.results;\r\n}\r\n\r\nexport async function fetchMoviesGenres() {\r\n  const response = await axios.get(\r\n    `${baseURL}genre/movie/list?api_key=${key}&language=en-US`\r\n  );\r\n  return response.data.genres;\r\n}\r\n\r\nexport async function fetchMoviesByGenre({ pageParam = 1, queryKey }) {\r\n  const [_key, { genreId }] = queryKey;\r\n  console.log(_key);\r\n  const response = await axios.get(\r\n    `${baseURL}discover/movie?api_key=${key}&with_genres=${genreId}&page=${pageParam}`\r\n  );\r\n  const results = response.data.results;\r\n  const totalPages = response.data.total_pages;\r\n  return { results, nextPage: pageParam + 1, totalPages: totalPages };\r\n}\r\n\r\nexport async function fetchSimilarMovies() {\r\n  const pageNumber = Math.floor(Math.random() * (500 - 1 + 1)) + 1;\r\n  const response = await axios.get(\r\n    `${baseURL}movie/725201/similar?api_key=${key}&language=en-US&page=${pageNumber}`\r\n  );\r\n  const results = response.data.results;\r\n  return { results };\r\n}\r\n\r\nexport async function fetchCategoryMovies({ pageParam = 1, queryKey }) {\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [_key, { category }] = queryKey;\r\n  const response = await axios.get(\r\n    `${baseURL}movie/${category}?api_key=${key}&language=en-US&page=${pageParam}`\r\n  );\r\n  const results = response.data.results;\r\n  const totalPages = response.data.total_pages;\r\n  return { results, nextPage: pageParam + 1, totalPages: totalPages };\r\n}\r\n\r\nexport async function searchMovie({ pageParam = 1, queryKey }) {\r\n  const [_key, { query }] = queryKey;\r\n  console.log(`${_key}`);\r\n  if (!query) {\r\n    return;\r\n  }\r\n  const response = await axios.get(\r\n    `${baseURL}search/movie?api_key=${key}&language=en-US&query=${query}&page=${pageParam}&include_adult=false`\r\n  );\r\n  const results = response.data.results;\r\n  const totalPages = response.data.total_pages;\r\n  if (!results.length) {\r\n    toast.info('Movies were not found');\r\n  }\r\n  return { results, nextPage: pageParam + 1, totalPages: totalPages };\r\n}\r\n\r\nexport async function movieDetails({ queryKey }) {\r\n  const [_key, { movieId }] = queryKey;\r\n  console.log(`${_key}`);\r\n  try {\r\n    const response = await axios.get(\r\n      `${baseURL}movie/${movieId}?api_key=${key}&language=en-US`\r\n    );\r\n    const data = await response.data;\r\n    return data;\r\n  } catch (error) {\r\n    return error.response.status;\r\n  }\r\n}\r\n\r\nexport async function similarMovies({ pageParam = 1, queryKey }) {\r\n  const [_key, { movieId }] = queryKey;\r\n  console.log(`${_key}`);\r\n  try {\r\n    const response = await axios.get(\r\n      `${baseURL}movie/${movieId}/similar?api_key=${key}&language=en-US&page=${pageParam}`\r\n    );\r\n    const results = response.data.results;\r\n    const totalPages = response.data.total_pages;\r\n    return { results, nextPage: pageParam + 1, totalPages: totalPages };\r\n  } catch (error) {\r\n    return error.response.status;\r\n  }\r\n}\r\n\r\nexport async function actorDetails({ queryKey }) {\r\n  const [_key, { actorId }] = queryKey;\r\n  console.log(`${_key}`);\r\n  try {\r\n    const response = await axios.get(\r\n      `${baseURL}person/${actorId}?api_key=${key}&language=en-US`\r\n    );\r\n    const data = await response.data;\r\n    return data;\r\n  } catch (error) {\r\n    return error.response.status;\r\n  }\r\n}\r\n\r\nexport async function filmsByActor({ queryKey }) {\r\n  const [_key, { actorId }] = queryKey;\r\n  console.log(`${_key}`);\r\n  const { data } = await axios.get(\r\n    `${baseURL}person/${actorId}/movie_credits?api_key=${key}&language=en-US`\r\n  );\r\n  return data;\r\n}\r\n\r\nexport async function movieCast({ queryKey }) {\r\n  const [_key, { movieId }] = queryKey;\r\n  console.log(`${_key}`);\r\n  const response = await axios.get(\r\n    `${baseURL}movie/${movieId}/credits?api_key=${key}&language=en-US`\r\n  );\r\n  return response.data;\r\n}\r\n\r\nexport async function movieReviews({ pageParam = 1, queryKey }) {\r\n  const [_key, { movieId }] = queryKey;\r\n  console.log(`${_key}`);\r\n  const response = await axios.get(\r\n    `${baseURL}movie/${movieId}/reviews?api_key=${key}&language=en-US&page=1`\r\n  );\r\n  const results = response.data.results;\r\n  const totalPages = response.data.total_pages;\r\n  return { results, nextPage: pageParam + 1, totalPages: totalPages };\r\n}\r\n\r\nexport async function fetchMovieTrailers(movieId) {\r\n  const response = await axios.get(\r\n    `${baseURL}movie/${movieId}/videos?api_key=${key}&language=en-US`\r\n  );\r\n  return response.data.results;\r\n}\r\n"],"names":["styled","motion","children","delay","initial","animate","variants","textVariants","List","device","Item","props","theme","bgCastCard","AvatarContainer","Avatar","Info","Date","Name","movieId","useParams","useInfiniteQuery","movieReviews","getNextPageParam","pages","nextPage","totalPages","staleTime","cacheTime","data","error","isLoading","isError","isSuccess","fetchNextPage","hasNextPage","toast","message","results","length","Notify","SentimentVeryDissatisfied","sx","fontSize","mt","console","log","hasMore","loadMore","map","author","content","created_at","id","avatar_path","author_details","formattedPath","replace","includes","src","alt","size","substr","baseURL","key","fetchTrendmovies","axios","response","fetchMoviesGenres","genres","fetchMoviesByGenre","pageParam","queryKey","_key","genreId","total_pages","fetchSimilarMovies","pageNumber","Math","floor","random","fetchCategoryMovies","category","searchMovie","query","movieDetails","status","actorDetails","actorId","filmsByActor","movieCast","fetchMovieTrailers"],"sourceRoot":""}