"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[721],{8491:function(e,n,t){t.d(n,{Z:function(){return d}});var i,r=t(168),o=t(9958),c=t(6188),s=(0,o.Z)(c.E.div)(i||(i=(0,r.Z)(["\n  width: 100%;\n  padding: 10% 20%;\n  border-radius: 5px;\n"]))),a=t(5905),l=t(184),d=function(e){var n=e.children;return(0,l.jsx)(s,{initial:"closed",animate:"open",variants:a.yr,children:n})}},3290:function(e,n,t){t.r(n),t.d(n,{default:function(){return A}});var i,r,o,c=t(5861),s=t(885),a=t(4687),l=t.n(a),d=t(2791),u=t(6871),f=t(1933),v=t(6960),h=t(6188),x=t(2436),m=t(6580),p=t(2843),g=t(1508),j=t(1413),w=t(3504),S=t(922),y=t(3549),Z=t(2441),b=t(4596),I=t(5615),k=t(3237),M=t(9436),C=t(184),O=function(e){var n,t,i,r,o=e.movieData,c=e.handleModalToggle,a=(0,d.useState)(null),l=(0,s.Z)(a,2),f=l[0],v=l[1],h=(0,d.useState)(null),x=(0,s.Z)(h,2),m=x[0],p=x[1],g=(0,u.TH)(),O=(0,u.UO)().movieId;function J(){var e=localStorage.getItem("favoritesMovies"),n=JSON.parse(e);n&&(n.find((function(e){return e.id===o.id}))&&p(o.id))}(0,d.useEffect)((function(){v(g.state),J()}),[g.state]),console.log(v),console.log(o);var N=o.poster_path,_=o.release_date,z=o.title,T=o.tagline,D=o.runtime,E=o.overview,F=o.budget,U=o.genres;return(0,C.jsxs)("div",{children:[(0,C.jsx)(Z.Z,{path:null!==(n=null!==(t=null===f||void 0===f||null===(i=f.from)||void 0===i?void 0:i.location)&&void 0!==t?t:null===f||void 0===f||null===(r=f.from)||void 0===r?void 0:r.prevLocation)&&void 0!==n?n:"/",state:{from:{location:g}}}),(0,C.jsxs)(b.W2,{children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("img",{src:null!==N?"https://image.tmdb.org/t/p/w500".concat(N):M,alt:z}),m?(0,C.jsxs)(b.hU,{onClick:function(){return(0,y.J)(o)},children:["Add to watched",(0,C.jsx)(I.r,{})]}):(0,C.jsxs)(b.hU,{onClick:function(){return e=o,(0,S.z)(e),void J();var e},children:["Add to favorites",(0,C.jsx)(k.r,{})]})]}),(0,C.jsxs)(b.xD,{children:[(0,C.jsx)("h1",{children:z}),""!==T&&(0,C.jsxs)("h2",{children:['"',T,'"']}),(0,C.jsx)("p",{children:E}),(0,C.jsxs)(b.n4,{children:[(0,C.jsxs)("li",{children:[(0,C.jsx)("p",{children:"Release date:"}),(0,C.jsx)("p",{children:"Runtime:"}),0!==F&&(0,C.jsx)("p",{children:"Budget:"})]}),(0,C.jsxs)("li",{children:[(0,C.jsxs)("p",{children:[" ",_]}),(0,C.jsxs)("p",{children:[D," minutes "]}),0!==F&&(0,C.jsxs)("p",{children:[F," $"]})]})]}),(0,C.jsx)(b.Ig,{children:U.map((function(e){var n=e.id,t=e.name;return(0,C.jsx)("li",{children:(0,C.jsx)(w.rU,{to:"/movies/by_genre=".concat(n),state:{from:{location:g}},children:t})},n)}))}),(0,C.jsx)(b.zx,{type:"button",padding:"10px",onClick:c,children:"Watch Trailer"}),(0,C.jsx)(b.Ff,{children:(0,C.jsxs)(b.C5,{children:[(0,C.jsx)(b.Fg,{to:"/movies/".concat(O,"/cast"),state:(0,j.Z)({},f),children:"Cast"}),(0,C.jsx)(b.Fg,{to:"/movies/".concat(O,"/reviews"),state:(0,j.Z)({},f),children:"Reviews"}),(0,C.jsx)(b.Fg,{to:"/movies/".concat(O,"/similar_movies"),state:(0,j.Z)({},f),children:"Similar Movies"})]})})]})]})]})},J=t(4164),N=t(5905),_=t(168),z=t(9958),T=z.Z.div(i||(i=(0,_.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: ",";\n  color: ",";\n  overflow-y: scroll;\n"])),(function(e){return e.theme.backdropColor}),(function(e){return e.theme.textColor})),D=(0,z.Z)(h.E.div)(r||(r=(0,_.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  border-radius: 5px;\n  text-align: center;\n  background-color: ",";\n  font-weight: ",";\n"])),(function(e){return e.theme.modalBgColor}),(function(e){return e.theme.mainTextFontWeight})),E=document.querySelector("#modal-root"),F=function(e){var n=e.children,t=e.onModal;return(0,J.createPortal)((0,C.jsx)(T,{onClick:function(e){"DIV"===e.target.nodeName&&t(!1)},children:(0,C.jsx)(D,{initial:"closed",animate:"open",exit:"closed",variants:N.Cu,children:n})}),E)},U=t(8491),R=t(7608),W=z.Z.iframe(o||(o=(0,_.Z)(["\n  width: 360px;\n  height: 230px;\n  border: none;\n  border-radius: 5px;\n  background-color: inherit;\n\n  @media "," {\n    width: 600px;\n    height: 400px;\n  }\n"])),R.U.tablet),A=function(){var e=(0,u.UO)().movieId,n=(0,u.s0)(),t=(0,d.useRef)("https://www.youtube.com/embed/"),i=(0,d.useState)(!1),r=(0,s.Z)(i,2),o=r[0],a=r[1],j=(0,d.useState)(null),w=(0,s.Z)(j,2),S=w[0],y=w[1],Z=function(){var e=(0,c.Z)(l().mark((function e(n){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return a(!1),e.abrupt("return");case 3:if(a(!0),S){e.next=10;break}return e.next=7,b();case 7:t=e.sent,sessionStorage.setItem("trailer",JSON.stringify(t)),y(t);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){var n=(0,c.Z)(l().mark((function n(){var t,i;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,g.np)(e);case 2:return t=n.sent,i=t.find((function(e){return e.name.includes("Official")})),n.abrupt("return",i);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),I=(0,f.useQuery)(["movieDetails",{movieId:e}],g.hG,{staleTime:6e4,cacheTime:6e4}),k=I.data,M=I.error,J=I.isLoading,_=I.isError,z=I.isSuccess;return(0,d.useEffect)((function(){if(404===k){var e=localStorage.getItem("movieId");n("/movies/".concat(e))}}),[k,n]),J?(0,C.jsx)(p.Z,{}):_?v.Am.error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(M.message)):z&&404!==k?(localStorage.setItem("movieId",JSON.stringify(+e)),(0,C.jsxs)(h.E.div,{initial:"closed",animate:"open",exit:"exit",variants:N.yv,children:[(0,C.jsx)(O,{movieData:k,handleModalToggle:function(e){return Z(e)}}),(0,C.jsx)(x.M,{children:o&&(0,C.jsxs)(F,{onModal:function(e){return Z(e)},children:[S&&(0,C.jsx)(W,{src:"".concat(t.current).concat(S.key,"?autoplay=0&mute=0&controls=1"),title:"video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),!S&&(0,C.jsxs)(U.Z,{children:[(0,C.jsx)("h2",{children:"We don't have trailer for this movie"}),(0,C.jsx)(m.Z,{sx:{fontSize:70,mt:1}})]})]})}),(0,C.jsx)(u.j3,{})]})):void 0}},922:function(e,n,t){t.d(n,{h:function(){return o},z:function(){return r}});var i=t(2982);function r(e){var n=localStorage.getItem("favoritesMovies"),t=JSON.parse(n);if(!t)return t=[e],void window.localStorage.setItem("favoritesMovies",JSON.stringify(t));t.find((function(n){return n.id===e.id}))||(t=[].concat((0,i.Z)(t),[e]),window.localStorage.setItem("favoritesMovies",JSON.stringify(t)))}function o(e,n){var t=e.filter((function(e){return e.id!==n}));return window.localStorage.setItem("favoritesMovies",JSON.stringify(t)),t}},3549:function(e,n,t){t.d(n,{J:function(){return r},b:function(){return o}});var i=t(2982);function r(e){var n=localStorage.getItem("watchedMovies"),t=JSON.parse(n);if(!t)return t=[e],void window.localStorage.setItem("watchedMovies",JSON.stringify(t));t.find((function(n){return n.id===e.id}))||(t=[].concat((0,i.Z)(t),[e]),window.localStorage.setItem("watchedMovies",JSON.stringify(t)))}function o(e,n){var t=e.filter((function(e){return e.id!==n}));return window.localStorage.setItem("watchedMovies",JSON.stringify(t)),t}},6580:function(e,n,t){var i=t(4836);n.Z=void 0;var r=i(t(5649)),o=t(184),c=(0,r.default)([(0,o.jsx)("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"0"),(0,o.jsx)("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"1"),(0,o.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-6c-2.33 0-4.32 1.45-5.12 3.5h1.67c.69-1.19 1.97-2 3.45-2s2.75.81 3.45 2h1.67c-.8-2.05-2.79-3.5-5.12-3.5z"},"2")],"SentimentVeryDissatisfied");n.Z=c}}]);
//# sourceMappingURL=movieDetailsPage.852e5aff.chunk.js.map