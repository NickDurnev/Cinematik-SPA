"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[721],{3290:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var r,i,o,a=n(5861),s=n(885),c=n(4687),l=n.n(c),u=n(2791),d=n(6871),f=n(1933),h=n(6960),v=n(2843),m=n(1508),x=n(1413),g=n(3504),p=n(922),j=n(3549),w=n(2441),S=n(4596),b=n(5615),y=n(3237),I=n(9436),Z=n(184),k=function(e){var t,n,r,i,o=e.movieData,a=e.handleModalToggle,c=(0,u.useState)(null),l=(0,s.Z)(c,2),f=l[0],h=l[1],v=(0,u.useState)(null),m=(0,s.Z)(v,2),k=m[0],M=m[1],O=(0,d.TH)(),J=(0,d.UO)().movieId;function N(){var e=localStorage.getItem("favoritesMovies"),t=JSON.parse(e);t&&(t.find((function(e){return e.id===o.id}))&&M(o.id))}(0,u.useEffect)((function(){h(O.state),N()}),[O.state]),console.log(o);var _=o.poster_path,C=o.release_date,F=o.title,T=o.tagline,U=o.runtime,D=o.overview,R=o.budget,W=o.genres;return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(w.Z,{path:null!==(t=null!==(n=null===f||void 0===f||null===(r=f.from)||void 0===r?void 0:r.location)&&void 0!==n?n:null===f||void 0===f||null===(i=f.from)||void 0===i?void 0:i.prevLocation)&&void 0!==t?t:"/",state:{from:{location:O}}}),(0,Z.jsxs)(S.W2,{children:[(0,Z.jsxs)("div",{children:[(0,Z.jsx)("img",{src:null!==_?"https://image.tmdb.org/t/p/w500".concat(_):I,alt:F}),k?(0,Z.jsxs)(S.hU,{onClick:function(){return(0,j.J)(o)},children:["Add to watched",(0,Z.jsx)(b.r,{})]}):(0,Z.jsxs)(S.hU,{onClick:function(){return e=o,(0,p.z)(e),void N();var e},children:["Add to favorites",(0,Z.jsx)(y.r,{})]})]}),(0,Z.jsxs)(S.xD,{children:[(0,Z.jsx)("h1",{children:F}),""!==T&&(0,Z.jsxs)("h2",{children:['"',T,'"']}),(0,Z.jsx)("p",{children:D}),(0,Z.jsxs)(S.n4,{children:[(0,Z.jsxs)("li",{children:[(0,Z.jsx)("p",{children:"Release date:"}),(0,Z.jsx)("p",{children:"Runtime:"}),0!==R&&(0,Z.jsx)("p",{children:"Budget:"})]}),(0,Z.jsxs)("li",{children:[(0,Z.jsxs)("p",{children:[" ",C]}),(0,Z.jsxs)("p",{children:[U," minutes "]}),0!==R&&(0,Z.jsxs)("p",{children:[R," $"]})]})]}),(0,Z.jsx)(S.Ig,{children:W.map((function(e){var t=e.id,n=e.name;return(0,Z.jsx)("li",{children:(0,Z.jsx)(g.rU,{to:"/movies/by_genre=".concat(t),state:{from:{location:O}},children:n})},t)}))}),(0,Z.jsx)(S.zx,{type:"button",padding:"10px",onClick:a,children:"Watch Trailer"}),(0,Z.jsx)(S.Ff,{children:(0,Z.jsxs)(S.C5,{children:[(0,Z.jsx)(S.Fg,{to:"/movies/".concat(J,"/cast"),state:(0,x.Z)({},f),children:"Cast"}),(0,Z.jsx)(S.Fg,{to:"/movies/".concat(J,"/reviews"),state:(0,x.Z)({},f),children:"Reviews"}),(0,Z.jsx)(S.Fg,{to:"/movies/".concat(J,"/similar_movies"),state:(0,x.Z)({},f),children:"Similar Movies"})]})})]})]})]})},M=n(4164),O=n(168),J=n(9958),N=n(4507),_=J.Z.div(r||(r=(0,O.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: ",";\n  color: ",";\n  overflow-y: scroll;\n"])),(function(e){return e.theme.backdropColor}),(function(e){return e.theme.textColor})),C=J.Z.div(i||(i=(0,O.Z)(["\n  position: absolute;\n  top: 40%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  /* min-width: 300px;\n  height: 400px; */\n  border-radius: 5px;\n  text-align: center;\n  background-color: ",";\n  font-weight: ",";\n\n  @media "," {\n    height: 200px;\n  }\n"])),(function(e){return e.theme.modalBgColor}),(function(e){return e.theme.mainTextFontWeight}),N.U.mobileM),F=document.querySelector("#modal-root"),T=function(e){var t=e.children,n=e.onModal;return(0,M.createPortal)((0,Z.jsx)(_,{onClick:function(e){"DIV"===e.target.nodeName&&n(!1)},children:(0,Z.jsx)(C,{children:t})}),F)},U=J.Z.iframe(o||(o=(0,O.Z)(["\n  width: 300px;\n  height: 200px;\n  border: none;\n  border-radius: 5px;\n  background-color: inherit;\n\n  @media "," {\n    width: 600px;\n    height: 400px;\n  }\n"])),N.U.tablet),D=function(){var e=(0,d.UO)().movieId,t=(0,d.s0)(),n=(0,u.useRef)("https://www.youtube.com/embed/"),r=(0,u.useState)(!1),i=(0,s.Z)(r,2),o=i[0],c=i[1],x=(0,u.useState)(null),g=(0,s.Z)(x,2),p=g[0],j=g[1],w=function(){var e=(0,a.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return c(!1),e.abrupt("return");case 3:if(c(!0),p){e.next=10;break}return e.next=7,S();case 7:n=e.sent,sessionStorage.setItem("trailer",JSON.stringify(n)),j(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var t=(0,a.Z)(l().mark((function t(){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,m.np)(e);case 2:return n=t.sent,r=n.find((function(e){return e.name.includes("Official")})),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=(0,f.useQuery)(["movieDetails",{movieId:e}],m.hG,{staleTime:6e4,cacheTime:6e4}),y=b.data,I=b.error,M=b.isLoading,O=b.isError,J=b.isSuccess;return(0,u.useEffect)((function(){if(404===y){var e=localStorage.getItem("movieId");t("/movies/".concat(e))}}),[y,t]),M?(0,Z.jsx)(v.Z,{}):O?h.Am.error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(I.message)):J&&404!==y?(localStorage.setItem("movieId",JSON.stringify(+e)),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(k,{movieData:y,handleModalToggle:function(e){return w(e)}}),o&&(0,Z.jsx)(T,{onModal:function(e){return w(e)},children:p?(0,Z.jsx)(U,{src:"".concat(n.current).concat(p.key,"?autoplay=0&mute=0&controls=1"),title:"video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):(0,Z.jsx)("h2",{children:"We don't have trailer for this movie"})}),(0,Z.jsx)(d.j3,{})]})):void 0}},922:function(e,t,n){n.d(t,{h:function(){return o},z:function(){return i}});var r=n(2982);function i(e){var t=localStorage.getItem("favoritesMovies"),n=JSON.parse(t);if(!n)return n=[e],void window.localStorage.setItem("favoritesMovies",JSON.stringify(n));n.find((function(t){return t.id===e.id}))||(n=[].concat((0,r.Z)(n),[e]),window.localStorage.setItem("favoritesMovies",JSON.stringify(n)))}function o(e,t){var n=e.filter((function(e){return e.id!==t}));return window.localStorage.setItem("favoritesMovies",JSON.stringify(n)),n}},3549:function(e,t,n){n.d(t,{J:function(){return i},b:function(){return o}});var r=n(2982);function i(e){var t=localStorage.getItem("watchedMovies"),n=JSON.parse(t);if(!n)return n=[e],void window.localStorage.setItem("watchedMovies",JSON.stringify(n));n.find((function(t){return t.id===e.id}))||(n=[].concat((0,r.Z)(n),[e]),window.localStorage.setItem("watchedMovies",JSON.stringify(n)))}function o(e,t){var n=e.filter((function(e){return e.id!==t}));return window.localStorage.setItem("watchedMovies",JSON.stringify(n)),n}}}]);
//# sourceMappingURL=movieDetailsPage.4205c059.chunk.js.map