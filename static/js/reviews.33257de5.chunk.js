"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[912],{6187:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r,a,u,c,s,o,i,p=n(1933),l=n(6871),f=n(6960),g=n(2843),d=n(131),h=n.n(d),v=n(1508),x=n(168),m=n(9958),y=m.Z.ul(r||(r=(0,x.Z)(["\n  width: 70%;\n  margin: 0 auto;\n  padding: 10px 20px;\n"]))),w=m.Z.li(a||(a=(0,x.Z)(["\n  display: flex;\n  padding: 20px;\n  align-items: center;\n  justify-content: space-between;\n  background-color: ",";\n  border-radius: 5px;\n  & + & {\n    margin-top: 10px;\n  }\n\n  & > div:first-child {\n    min-width: 100px;\n  }\n"])),(function(e){return e.theme.bgCastCard})),Z=m.Z.div(u||(u=(0,x.Z)(["\n  margin-bottom: 5px;\n"]))),_=m.Z.img(c||(c=(0,x.Z)(["\n  margin: 0 auto;\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n"]))),k=m.Z.div(s||(s=(0,x.Z)(["\n  width: 95%;\n  & p + p {\n    margin-top: 5px;\n  }\n"]))),b=m.Z.p(o||(o=(0,x.Z)(["\n  font-size: 20px;\n"]))),P=m.Z.p(i||(i=(0,x.Z)(["\n  font-size: 20px;\n  font-weight: 600;\n"]))),j=n(6355),U=n(184),S=function(){var e=(0,l.UO)().movieId,t=(0,p.useInfiniteQuery)(["movieReviews",{movieId:e}],v.Cm,{getNextPageParam:function(e){if(!(e.nextPage>e.totalPages))return e.nextPage},staleTime:6e4,cacheTime:6e4}),n=t.data,r=t.error,a=t.isLoading,u=t.isError,c=t.isSuccess,s=t.fetchNextPage,o=t.hasNextPage;return a?(0,U.jsx)(g.Z,{}):u?f.Am.error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(r.message)):c?0===n.pages[0].results.length?(0,U.jsx)("h2",{children:"We don't have any reviews for this movie"}):(console.log(n),(0,U.jsx)(h(),{hasMore:o,loadMore:s,children:n.pages.map((function(e){var t=e.results,n=e.nextPage;return(0,U.jsx)(y,{children:t.map((function(e){var t=e.author,n=e.content,r=e.created_at,a=e.id,u=e.author_details.avatar_path,c=null;return u&&(c=u.replace("/","")),(0,U.jsxs)(w,{children:[(0,U.jsx)("div",{children:(0,U.jsx)(Z,{children:u&&c.includes("www.gravatar.com")?(0,U.jsx)(_,{src:c,alt:"User avatar"}):(0,U.jsx)(j.m3W,{size:"60"})})}),(0,U.jsxs)(k,{children:[(0,U.jsx)(b,{children:r.substr(0,10)}),(0,U.jsx)(P,{children:t}),(0,U.jsx)("p",{children:n})]})]},a)}))},"id".concat(n))}))})):void 0}},1508:function(e,t,n){n.d(t,{AW:function(){return x},Cm:function(){return C},TW:function(){return q},_0:function(){return U},f8:function(){return P},gY:function(){return l},hG:function(){return k},lJ:function(){return h},np:function(){return M},qF:function(){return Z},r9:function(){return g},y:function(){return y}});var r=n(885),a=n(5861),u=n(4687),c=n.n(u),s=n(4569),o=n.n(s),i=n(6960);o().defaults.baseURL="https://api.themoviedb.org/3/";var p="105ba628fde77462ee84526f3393a31c";function l(){return f.apply(this,arguments)}function f(){return(f=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("trending/movie/day?api_key=".concat(p));case 2:return t=e.sent,e.abrupt("return",t.data.results);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return d.apply(this,arguments)}function d(){return(d=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("genre/movie/list?api_key=".concat(p,"&language=en-US"));case 2:return t=e.sent,e.abrupt("return",t.data.genres);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return v.apply(this,arguments)}function v(){return(v=(0,a.Z)(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.floor(500*Math.random())+1,e.next=3,o().get("movie/725201/similar?api_key=".concat(p,"&language=en-US&page=").concat(t));case 3:return n=e.sent,r=n.data.results,e.abrupt("return",{results:r});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)(c().mark((function e(t){var n,r,a,u,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageParam,r=void 0===n?1:n,e.next=3,o().get("movie/top_rated?api_key=".concat(p,"&language=en-US&page=").concat(r));case 3:return a=e.sent,u=a.data.results,s=a.data.total_pages,e.abrupt("return",{results:u,nextPage:r+1,totalPages:s});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)(c().mark((function e(t){var n,r,a,u,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageParam,r=void 0===n?1:n,e.next=3,o().get("movie/upcoming?api_key=".concat(p,"&language=en-US&page=").concat(r));case 3:return a=e.sent,u=a.data.results,s=a.data.total_pages,e.abrupt("return",{results:u,nextPage:r+1,totalPages:s});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return _.apply(this,arguments)}function _(){return(_=(0,a.Z)(c().mark((function e(t){var n,a,u,s,l,f,g,d,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.pageParam,a=void 0===n?1:n,u=t.queryKey,s=(0,r.Z)(u,2),l=s[0],f=s[1].query,console.log("".concat(l)),f){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,o().get("search/movie?api_key=".concat(p,"&language=en-US&query=").concat(f,"&page=").concat(a,"&include_adult=false"));case 7:return g=e.sent,d=g.data.results,h=g.data.total_pages,d.length||i.Am.info("Movies were not found"),e.abrupt("return",{results:d,nextPage:a+1,totalPages:h});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)(c().mark((function e(t){var n,a,u,s,i,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.queryKey,a=(0,r.Z)(n,2),u=a[0],s=a[1].movieId,console.log("".concat(u)),e.prev=3,e.next=6,o().get("movie/".concat(s,"?api_key=").concat(p,"&language=en-US"));case 6:return i=e.sent,e.next=9,i.data;case 9:return l=e.sent,e.abrupt("return",l);case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",e.t0.response.status);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function P(e){return j.apply(this,arguments)}function j(){return(j=(0,a.Z)(c().mark((function e(t){var n,a,u,s,i,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.queryKey,a=(0,r.Z)(n,2),u=a[0],s=a[1].actorId,console.log("".concat(u)),e.prev=3,e.next=6,o().get("person/".concat(s,"?api_key=").concat(p,"&language=en-US"));case 6:return i=e.sent,e.next=9,i.data;case 9:return l=e.sent,e.abrupt("return",l);case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",e.t0.response.status);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function U(e){return S.apply(this,arguments)}function S(){return(S=(0,a.Z)(c().mark((function e(t){var n,a,u,s,i,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.queryKey,a=(0,r.Z)(n,2),u=a[0],s=a[1].actorId,console.log("".concat(u)),e.prev=3,e.next=6,o().get("person/".concat(s,"/movie_credits?api_key=").concat(p,"&language=en-US"));case 6:return i=e.sent,e.next=9,i.data;case 9:return l=e.sent,e.abrupt("return",l);case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",e.t0.response.status);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function q(e){return I.apply(this,arguments)}function I(){return(I=(0,a.Z)(c().mark((function e(t){var n,a,u,s,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.queryKey,a=(0,r.Z)(n,2),u=a[0],s=a[1].movieId,console.log("".concat(u)),e.next=5,o().get("movie/".concat(s,"/credits?api_key=").concat(p,"&language=en-US"));case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return K.apply(this,arguments)}function K(){return(K=(0,a.Z)(c().mark((function e(t){var n,a,u,s,i,l,f,g,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageParam,a=void 0===n?1:n,u=t.queryKey,s=(0,r.Z)(u,2),i=s[0],l=s[1].movieId,console.log("".concat(i)),e.next=5,o().get("movie/".concat(l,"/reviews?api_key=").concat(p,"&language=en-US&page=1"));case 5:return f=e.sent,g=f.data.results,d=f.data.total_pages,e.abrupt("return",{results:g,nextPage:a+1,totalPages:d});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return W.apply(this,arguments)}function W(){return(W=(0,a.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("movie/".concat(t,"/videos?api_key=").concat(p,"&language=en-US"));case 2:return n=e.sent,e.abrupt("return",n.data.results);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=reviews.33257de5.chunk.js.map