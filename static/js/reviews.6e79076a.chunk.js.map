{"version":3,"file":"static/js/reviews.6e79076a.chunk.js","mappings":"wRAEaA,EAAOC,EAAAA,GAAAA,GAAH,+CAIJC,EAAOD,EAAAA,GAAAA,GAAH,+MAKK,SAAAE,GAAK,OAAIA,EAAMC,MAAMC,cAO9BC,EAAOL,EAAAA,GAAAA,IAAH,+EAOJM,EAAON,EAAAA,GAAAA,EAAH,4CAIJO,EAAOP,EAAAA,GAAAA,EAAH,iE,mBCkCjB,EAtDgB,WACd,IAAQQ,GAAYC,EAAAA,EAAAA,MAAZD,QAER,GAQIE,EAAAA,EAAAA,kBAAiB,CAAC,eAAgB,CAAEF,QAAAA,IAAYG,EAAAA,GAAc,CAChEC,iBAAkB,SAAAC,GAChB,KAAIA,EAAMC,SAAWD,EAAME,YAG3B,OAAOF,EAAMC,UAEfE,UAAW,IACXC,UAAW,MAfXC,EADF,EACEA,KACAC,EAFF,EAEEA,MACAC,EAHF,EAGEA,UACAC,EAJF,EAIEA,QACAC,EALF,EAKEA,UACAC,EANF,EAMEA,cACAC,EAPF,EAOEA,YAYF,OAAIJ,GACK,SAAC,IAAD,IAGLC,EACKI,EAAAA,GAAAA,MAAA,gDAAuBN,EAAMO,UAGlCJ,GAEA,SAAC,IAAD,CAAgBK,QAASH,EAAaI,SAAUL,EAAhD,SACGL,EAAKL,MAAMgB,KAAI,gBAAGC,EAAH,EAAGA,QAAShB,EAAZ,EAAYA,SAAZ,OACd,SAACf,EAAD,UACG+B,EAAQD,KAAI,gBAAGE,EAAH,EAAGA,OAAQC,EAAX,EAAWA,QAASC,EAApB,EAAoBA,WAAYC,EAAhC,EAAgCA,GAAhC,OACX,UAACjC,EAAD,YACE,2BACE,SAAC,MAAD,CAAckC,KAAK,UAErB,UAAC9B,EAAD,YACE,SAAC,EAAD,UAAO4B,EAAWG,OAAO,EAAG,OAC5B,SAAC7B,EAAD,UAAOwB,KACP,uBAAIC,SAPGE,OAFf,YAAgBpB,cAJxB","sources":["components/Reviews/Reviews.styled.jsx","components/Reviews/Reviews.jsx"],"sourcesContent":["import styled from 'styled-components';\n\nexport const List = styled.ul`\n  padding: 10px 20px;\n`;\n\nexport const Item = styled.li`\n  display: flex;\n  padding: 20px;\n  align-items: center;\n  justify-content: space-between;\n  background-color: ${props => props.theme.bgCastCard};\n  border-radius: 5px;\n  & + & {\n    margin-top: 10px;\n  }\n`;\n\nexport const Info = styled.div`\n  width: 95%;\n  & p + p {\n    margin-top: 5px;\n  }\n`;\n\nexport const Date = styled.p`\n  font-size: 20px;\n`;\n\nexport const Name = styled.p`\n  font-size: 20px;\n  font-weight: 600;\n`;\n","import { useInfiniteQuery } from 'react-query';\nimport { useParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport ThreeDots from 'components/Loaders/Loader';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { movieReviews } from 'services/api';\nimport { List, Item, Info, Date, Name } from './Reviews.styled';\nimport { FaUserCircle } from 'react-icons/fa';\n\nconst Reviews = () => {\n  const { movieId } = useParams();\n\n  const {\n    data,\n    error,\n    isLoading,\n    isError,\n    isSuccess,\n    fetchNextPage,\n    hasNextPage,\n  } = useInfiniteQuery(['movieReviews', { movieId }], movieReviews, {\n    getNextPageParam: pages => {\n      if (pages.nextPage > pages.totalPages) {\n        return undefined;\n      }\n      return pages.nextPage;\n    },\n    staleTime: 60000,\n    cacheTime: 60000,\n  });\n\n  if (isLoading) {\n    return <ThreeDots />;\n  }\n\n  if (isError) {\n    return toast.error(`Ошибка: ${error.message}`);\n  }\n\n  if (isSuccess) {\n    return (\n      <InfiniteScroll hasMore={hasNextPage} loadMore={fetchNextPage}>\n        {data.pages.map(({ results, nextPage }) => (\n          <List key={`id${nextPage}`}>\n            {results.map(({ author, content, created_at, id }) => (\n              <Item key={id}>\n                <span>\n                  <FaUserCircle size=\"48\"></FaUserCircle>\n                </span>\n                <Info>\n                  <Date>{created_at.substr(0, 10)}</Date>\n                  <Name>{author}</Name>\n                  <p>{content}</p>\n                </Info>\n              </Item>\n            ))}\n          </List>\n        ))}\n      </InfiniteScroll>\n    );\n  }\n};\n\nexport default Reviews;\n"],"names":["List","styled","Item","props","theme","bgCastCard","Info","Date","Name","movieId","useParams","useInfiniteQuery","movieReviews","getNextPageParam","pages","nextPage","totalPages","staleTime","cacheTime","data","error","isLoading","isError","isSuccess","fetchNextPage","hasNextPage","toast","message","hasMore","loadMore","map","results","author","content","created_at","id","size","substr"],"sourceRoot":""}