"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[721],{3290:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var r,i,o,s=n(5861),c=n(885),a=n(4687),l=n.n(a),u=n(2791),d=n(6871),h=n(1933),m=n(6960),f=n(2843),v=n(1508),x=n(1413),p=n(3504),g=n(2441),j=n(4596),w=n(9436),b=n(184),Z=function(e){var t,n,r,i,o=e.movieData,s=e.handleModalToggle,a=(0,u.useState)(null),l=(0,c.Z)(a,2),h=l[0],m=l[1],f=(0,d.TH)(),v=(0,d.UO)().movieId;(0,u.useEffect)((function(){m(f.state)}),[f.state]),console.log(o);var Z=o.poster_path,y=o.release_date,k=o.title,S=o.tagline,_=o.runtime,I=o.overview,C=o.budget,T=o.genres;return(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Z,{path:null!==(t=null!==(n=null===h||void 0===h||null===(r=h.from)||void 0===r?void 0:r.location)&&void 0!==n?n:null===h||void 0===h||null===(i=h.from)||void 0===i?void 0:i.prevLocation)&&void 0!==t?t:"/",state:{from:{location:f}}}),(0,b.jsxs)(j.W2,{children:[(0,b.jsx)("div",{children:(0,b.jsx)("img",{src:null!==Z?"https://image.tmdb.org/t/p/w500".concat(Z):w,alt:k})}),(0,b.jsxs)(j.xD,{children:[(0,b.jsx)("h1",{children:k}),""!==S&&(0,b.jsxs)("h2",{children:['"',S,'"']}),(0,b.jsx)("p",{children:I}),(0,b.jsxs)(j.n4,{children:[(0,b.jsxs)("li",{children:[(0,b.jsx)("p",{children:"Release date:"}),(0,b.jsx)("p",{children:"Runtime:"}),0!==C&&(0,b.jsx)("p",{children:"Budget:"})]}),(0,b.jsxs)("li",{children:[(0,b.jsxs)("p",{children:[" ",y]}),(0,b.jsxs)("p",{children:[_," minutes "]}),0!==C&&(0,b.jsxs)("p",{children:[C," $"]})]})]}),(0,b.jsx)(j.Ig,{children:T.map((function(e){var t=e.id,n=e.name;return(0,b.jsx)("li",{children:(0,b.jsx)(p.rU,{to:"/movies/by_genre=".concat(t),state:{from:{location:f}},children:n})},t)}))}),(0,b.jsx)(j.zx,{type:"button",padding:"10px",onClick:s,children:"Watch Trailer"}),(0,b.jsx)(j.Ff,{children:(0,b.jsxs)(j.C5,{children:[(0,b.jsx)(j.Fg,{to:"/movies/".concat(v,"/cast"),state:(0,x.Z)({},h),children:"Cast"}),(0,b.jsx)(j.Fg,{to:"/movies/".concat(v,"/reviews"),state:(0,x.Z)({},h),children:"Reviews"}),(0,b.jsx)(j.Fg,{to:"/movies/".concat(v,"/similar_movies"),state:(0,x.Z)({},h),children:"Similar Movies"})]})})]})]})]})},y=n(4164),k=n(168),S=n(9958),_=S.Z.div(r||(r=(0,k.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: ",";\n  color: ",";\n  overflow-y: scroll;\n"])),(function(e){return e.theme.backdropColor}),(function(e){return e.theme.textColor})),I=S.Z.div(i||(i=(0,k.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  min-width: 300px;\n  text-align: center;\n  background-color: ",";\n  font-weight: ",";\n"])),(function(e){return e.theme.modalBgColor}),(function(e){return e.theme.mainTextFontWeight})),C=document.querySelector("#modal-root"),T=function(e){var t=e.children,n=e.onModal;return(0,y.createPortal)((0,b.jsx)(_,{onClick:function(e){"DIV"===e.target.nodeName&&n(!1)},children:(0,b.jsx)(I,{children:t})}),C)},F=S.Z.div(o||(o=(0,k.Z)(["\n  width: 95vw;\n  padding: 10px 5px;\n"]))),D=function(){var e=(0,d.UO)().movieId,t=(0,d.s0)(),n=(0,u.useRef)("https://www.youtube.com/embed/"),r=(0,u.useState)(!1),i=(0,c.Z)(r,2),o=i[0],a=i[1],x=(0,u.useState)(null),p=(0,c.Z)(x,2),g=p[0],j=p[1],w=function(){var e=(0,s.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return a(!1),e.abrupt("return");case 3:if(a(!0),g){e.next=10;break}return e.next=7,y();case 7:n=e.sent,sessionStorage.setItem("trailer",JSON.stringify(n)),j(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var t=(0,s.Z)(l().mark((function t(){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,v.np)(e);case 2:return n=t.sent,r=n.find((function(e){return e.name.includes("Official")})),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=(0,h.useQuery)(["movieDetails",{movieId:e}],v.hG,{staleTime:6e4,cacheTime:6e4}),S=k.data,_=k.error,I=k.isLoading,C=k.isError,D=k.isSuccess;return(0,u.useEffect)((function(){if(404===S){var e=localStorage.getItem("movieId");t("/movies/".concat(e))}}),[S,t]),I?(0,b.jsx)(f.Z,{}):C?m.Am.error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(_.message)):D&&404!==S?(localStorage.setItem("movieId",JSON.stringify(+e)),(0,b.jsxs)(F,{children:[(0,b.jsx)(Z,{movieData:S,handleModalToggle:function(e){return w(e)}}),o&&(0,b.jsx)(T,{onModal:function(e){return w(e)},children:g?(0,b.jsx)("iframe",{src:"".concat(n.current).concat(g.key,"?autoplay=0&mute=0&controls=1"),title:"video",width:"600",height:"400",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):(0,b.jsx)("h2",{children:"We don't have trailer for this movie"})}),(0,b.jsx)(d.j3,{})]})):void 0}}}]);
//# sourceMappingURL=movieDetailsPage.1c98b840.chunk.js.map