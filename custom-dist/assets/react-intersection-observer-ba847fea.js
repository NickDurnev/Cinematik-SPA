import{a}from"./vendor-446e3497.js";const R=new Map,g=new WeakMap;let p=0,E;function V(e){return e?(g.has(e)||(p+=1,g.set(e,p.toString())),g.get(e)):"0"}function x(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?V(e.root):e[t]}`).toString()}function C(e){let t=x(e),s=R.get(t);if(!s){const o=new Map;let f;const u=new IntersectionObserver(i=>{i.forEach(r=>{var c;const b=r.isIntersecting&&f.some(n=>r.intersectionRatio>=n);e.trackVisibility&&typeof r.isVisible>"u"&&(r.isVisible=b),(c=o.get(r.target))==null||c.forEach(n=>{n(b,r)})})},e);f=u.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),s={id:t,observer:u,elements:o},R.set(t,s)}return s}function M(e,t,s={},o=E){if(typeof window.IntersectionObserver>"u"&&o!==void 0){const c=e.getBoundingClientRect();return t(o,{isIntersecting:o,target:e,intersectionRatio:typeof s.threshold=="number"?s.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}const{id:f,observer:u,elements:i}=C(s);let r=i.get(e)||[];return i.has(e)||i.set(e,r),r.push(t),u.observe(e),function(){r.splice(r.indexOf(t),1),r.length===0&&(i.delete(e),u.unobserve(e)),i.size===0&&(u.disconnect(),R.delete(f))}}function $({threshold:e,delay:t,trackVisibility:s,rootMargin:o,root:f,triggerOnce:u,skip:i,initialInView:r,fallbackInView:c,onChange:b}={}){const n=a.useRef(),h=a.useRef(),[l,w]=a.useState({inView:!!r});h.current=b;const A=a.useCallback(I=>{n.current!==void 0&&(n.current(),n.current=void 0),!i&&I&&(n.current=M(I,(S,v)=>{w({inView:S,entry:v}),h.current&&h.current(S,v),v.isIntersecting&&u&&n.current&&(n.current(),n.current=void 0)},{root:f,rootMargin:o,threshold:e,trackVisibility:s,delay:t},c))},[Array.isArray(e)?e.toString():e,f,o,u,i,s,c,t]);a.useEffect(()=>{!n.current&&l.entry&&!u&&!i&&w({inView:!!r})});const d=[A,l.inView,l.entry];return d.ref=d[0],d.inView=d[1],d.entry=d[2],d}export{$ as u};
