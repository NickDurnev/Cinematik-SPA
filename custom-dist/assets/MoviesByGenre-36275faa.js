import{a as r,b as y,u as P,e as G,W as M,j as e,m as u,L as B}from"./vendor-446e3497.js";import{u as E}from"./react-intersection-observer-ba847fea.js";import{a as L,p as I,G as S,M as V,i as b,b as k,Q,d as T}from"./common-c2210d67.js";import"./axios-d95ca511.js";const $=()=>{var f;const[i,l]=r.useState([]),[n,d]=r.useState(0),t=y(),g=P(),{genreID:p}=g,{ref:h,inView:o}=E({threshold:.1}),{data:a,error:j,fetchNextPage:v,isLoading:c,isError:m,isSuccess:x}=G(["moviesByGenre",{genreID:p}],T,{staleTime:6e4,cacheTime:6e4,getNextPageParam:s=>{if(!(typeof s=="object"&&s.nextPage>s.totalPages))return s.nextPage}});return r.useEffect(()=>{i.length!==0&&o&&v()},[o]),r.useEffect(()=>{x&&(a!=null&&a.pages[n])&&(l([...i,...a.pages[n].results]),d(n+1)),m&&M.error(`Error: ${j.response.data.message}`)},[a,m,x]),c?e.jsx(L,{}):e.jsxs(e.Fragment,{children:[e.jsxs(u.div,{initial:"closed",animate:"open",exit:"exit",variants:I,children:[t.state&&e.jsx(S,{path:((f=(t==null?void 0:t.state).from)==null?void 0:f.location)??"/"}),i.length>0&&!c&&e.jsx(V,{children:i.map(s=>e.jsx(u.li,{initial:"closed",animate:"open",exit:"exit",variants:b(),children:e.jsx(B,{to:`/movies/${s.id}`,state:{from:{location:t}},children:e.jsx(k,{movie:s})})},s.id))})]}),e.jsx(Q,{ref:h})]})},D=$;export{D as default};
