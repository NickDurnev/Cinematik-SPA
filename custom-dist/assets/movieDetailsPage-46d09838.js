import{u as B,D as F,e as T,T as O,k as V,G as _,N as H,l as R,n as P}from"./common-c2210d67.js";import{a,b as D,d as L,W as y,j as e,L as W,n as I,u as A,c as N,m as Z,A as z,O as Q}from"./vendor-446e3497.js";import"./axios-d95ca511.js";import{C as G,a as J,I as U,M as q,b as K,B as X,c as Y,d as k}from"./shared/actorDetailsPage/movieDetailsPage-aa64b57f.js";import{d as e1}from"./@mui/icons-material-2d86ad94.js";import{a as t1,b as s1,c as r1}from"./shared/CategoryMoviesPage/movieDetailsPage-7b8afc0d.js";import{M as a1}from"./shared/login-page/movieDetailsPage-ebd497f6.js";const o1=t=>a.createElement("svg",{width:21,height:18,viewBox:"0 0 21 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},a.createElement("path",{d:"M7 17.9198V16.922H8V15.9243H3C2.20435 15.9243 1.44129 15.609 0.87868 15.0476C0.31607 14.4863 0 13.725 0 12.9311V3.95166C0 3.15782 0.31607 2.3965 0.87868 1.83517C1.44129 1.27385 2.20435 0.958496 3 0.958496H18C18.7956 0.958496 19.5587 1.27385 20.1213 1.83517C20.6839 2.3965 21 3.15782 21 3.95166V12.9311C21 13.725 20.6839 14.4863 20.1213 15.0476C19.5587 15.609 18.7956 15.9243 18 15.9243H13V16.922H14V17.9198H7ZM9 15.9243V16.922H12V15.9243H9ZM3 1.95622C2.46957 1.95622 1.96086 2.16645 1.58579 2.54067C1.21071 2.91489 1 3.42243 1 3.95166V12.9311C1 13.4604 1.21071 13.9679 1.58579 14.3421C1.96086 14.7164 2.46957 14.9266 3 14.9266H18C18.5304 14.9266 19.0391 14.7164 19.4142 14.3421C19.7893 13.9679 20 13.4604 20 12.9311V3.95166C20 3.42243 19.7893 2.91489 19.4142 2.54067C19.0391 2.16645 18.5304 1.95622 18 1.95622H3Z"})),i1=t=>a.createElement("svg",{width:21,height:21,viewBox:"0 0 21 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},a.createElement("path",{d:"M16.2645 20.8802C16.0374 20.8808 15.8149 20.8168 15.6229 20.6959L10.7236 17.5923C10.6567 17.5501 10.5792 17.5276 10.5 17.5276C10.4208 17.5276 10.3433 17.5501 10.2764 17.5923L5.72707 20.4728C5.49941 20.6197 5.23223 20.6938 4.96125 20.6851C4.69027 20.6764 4.42839 20.5855 4.21062 20.4243C3.98206 20.2595 3.80872 20.0296 3.71332 19.7649C3.61792 19.5001 3.6049 19.2127 3.67598 18.9404L4.98829 13.7904C5.01147 13.7056 5.01007 13.6159 4.98426 13.5318C4.95846 13.4477 4.9093 13.3726 4.84248 13.3152L0.448661 9.66849C0.257882 9.51137 0.11881 9.3007 0.0494787 9.06378C-0.019853 8.82686 -0.0162476 8.57462 0.0598274 8.33977C0.13305 8.10856 0.274078 7.90458 0.464693 7.75416C0.655307 7.60375 0.88675 7.51381 1.12912 7.49599L6.87413 7.12744C6.95455 7.11969 7.03136 7.09035 7.0964 7.04253C7.16144 6.99471 7.21228 6.93021 7.24352 6.85587L9.3821 1.47311C9.46817 1.2468 9.6212 1.05197 9.82087 0.914484C10.0205 0.777 10.2574 0.703369 10.5 0.703369C10.7426 0.703369 10.9795 0.777 11.1791 0.914484C11.3788 1.05197 11.5318 1.2468 11.6179 1.47311L13.7565 6.85587C13.7877 6.93021 13.8386 6.99471 13.9036 7.04253C13.9686 7.09035 14.0455 7.11969 14.1259 7.12744L19.8709 7.49599C20.1133 7.51381 20.3447 7.60375 20.5353 7.75416C20.7259 7.90458 20.867 8.10856 20.9402 8.33977C21.0162 8.57462 21.0199 8.82686 20.9505 9.06378C20.8812 9.3007 20.7421 9.51137 20.5513 9.66849L16.1575 13.3152C16.0907 13.3726 16.0415 13.4477 16.0157 13.5318C15.9899 13.6159 15.9885 13.7056 16.0117 13.7904L17.431 19.3478C17.4939 19.587 17.482 19.8397 17.3969 20.072C17.3118 20.3044 17.1574 20.5051 16.9546 20.6474C16.7564 20.7984 16.5139 20.8802 16.2645 20.8802ZM10.5 16.7485C10.7279 16.7514 10.9504 16.8186 11.1416 16.9425L16.0409 20.0364C16.1083 20.0831 16.1888 20.1073 16.2709 20.1056C16.353 20.1038 16.4324 20.0762 16.4978 20.0267C16.5736 19.9738 16.6312 19.8988 16.6625 19.812C16.6939 19.7251 16.6974 19.6307 16.6727 19.5417L15.2535 13.9747C15.1984 13.7489 15.2074 13.5122 15.2795 13.2913C15.3516 13.0703 15.484 12.8737 15.6618 12.7236L20.0556 9.07687C20.1273 9.01685 20.1789 8.93628 20.2032 8.84608C20.2275 8.75587 20.2235 8.66039 20.1917 8.57254C20.1694 8.49013 20.1218 8.41678 20.0555 8.36283C19.9892 8.30889 19.9077 8.27707 19.8223 8.27188L14.0773 7.90333C13.8492 7.88623 13.6306 7.80525 13.4466 7.66971C13.2626 7.53417 13.1207 7.34957 13.0371 7.13713L10.8986 1.75437C10.8673 1.67428 10.8125 1.60547 10.7414 1.55696C10.6703 1.50846 10.5861 1.4825 10.5 1.4825C10.4139 1.4825 10.3297 1.50846 10.2586 1.55696C10.1875 1.60547 10.1327 1.67428 10.1014 1.75437L7.96286 7.13713C7.87934 7.34957 7.73742 7.53417 7.55342 7.66971C7.36942 7.80525 7.15081 7.88623 6.92273 7.90333L1.17772 8.27188C1.09188 8.27918 1.0101 8.3116 0.94266 8.36509C0.875215 8.41858 0.825104 8.49074 0.798611 8.57254C0.771843 8.6617 0.771358 8.75666 0.797214 8.84609C0.823069 8.93552 0.874172 9.01563 0.944423 9.07687L5.33824 12.7236C5.51604 12.8737 5.64842 13.0703 5.72053 13.2913C5.79264 13.5122 5.80164 13.7489 5.74651 13.9747L4.4342 19.1344C4.39778 19.2548 4.40077 19.3836 4.44272 19.5022C4.48467 19.6208 4.56341 19.723 4.6675 19.7939C4.75858 19.8646 4.8698 19.9045 4.98512 19.908C5.10043 19.9115 5.21387 19.8783 5.30908 19.8133L9.85843 16.9425C10.0496 16.8186 10.2721 16.7514 10.5 16.7485Z"})),n1=({movieData:t,handleTrailerToggle:c})=>{const[h,S]=a.useState(!0),[i,u]=a.useState(null),[m]=B("userID",null),w=D(),{id:d,poster_path:C,release_date:p,vote_average:E,title:l,tagline:x,runtime:b,overview:M,budget:f,genres:g}=t,v={idbID:d,poster_path:C,title:l,vote_average:E,genres:g,release_date:p,tagline:x,runtime:b,overview:M,budget:f},s=L(["addFavoriteMovie",{userID:m,dataToFetch:v}],t1,{refetchOnWindowFocus:!1,enabled:!1,retry:!1}),r=L(["addWatchedMovie",{userID:m,dataToFetch:v}],s1,{refetchOnWindowFocus:!1,enabled:!1,retry:!1}),j=L(["checkCategoryById",{userID:m,id:d}],r1,{retry:!1,enabled:h});return a.useEffect(()=>{if(j.isSuccess){const{category:n}=j.data.data;S(!1),n&&u(n)}},[j]),a.useEffect(()=>{var n;if(s.isSuccess){const{category:o}=s.data.data.movie;o&&u(o)}if(s.isError){const o=(n=s.error.response)==null?void 0:n.data;o&&y.error(o.message)}},[s.isSuccess,s.isError]),a.useEffect(()=>{var n;if(r.isSuccess&&i!=="watched"){const{category:o}=r.data.data.movie;o&&u(o)}if(r.isError){const o=(n=r.error.response)==null?void 0:n.data;o&&y.error(o.message)}},[r.isSuccess,r.isError]),e.jsxs(G,{children:[e.jsx(J,{poster_path:C,children:C?e.jsx("img",{src:`https://image.tmdb.org/t/p/w400${C}`,alt:l}):e.jsx(F,{})}),e.jsxs(U,{children:[e.jsx("h2",{children:l}),x!==""&&e.jsxs("h3",{children:['"',x,'"']}),e.jsx("p",{children:M}),e.jsxs(q,{children:[e.jsxs("li",{children:[e.jsx("p",{children:"Release date:"}),e.jsx("p",{children:"Runtime:"}),f!==0&&e.jsx("p",{children:"Budget:"})]}),e.jsxs("li",{children:[e.jsxs("p",{children:[" ",p]}),e.jsxs("p",{children:[b," minutes "]}),f!==0&&e.jsxs("p",{children:[f," $"]})]})]}),e.jsx(K,{children:g.map(({id:n,name:o})=>e.jsx("li",{children:e.jsx(W,{to:`/movies/by_genre=${n}`,state:{from:{location:w}},children:o})},n))}),e.jsxs(X,{children:[e.jsx(Y,{type:"button",padding:"10px",onClick:c,children:"Watch Trailer"}),i?e.jsxs(k,{onClick:()=>r.refetch(),type:"button",disabled:i==="watched",children:["Add to watched",e.jsx(o1,{})]}):e.jsxs(k,{onClick:()=>s.refetch(),type:"button",disabled:i==="watched",children:["Add to favorites",e.jsx(i1,{})]})]})]})]})},c1=I.div`
  width: 90%;
  margin: 50px auto;
  display: flex;
  justify-content: space-between;
  align-items: center;

  @media ${T.tablet} {
    width: 90%;
    margin: 100px auto;
  }

  @media ${T.laptopM} {
    width: 950px;
  }
`,$=I(W)`
  padding: 5px;
  font-family: 'Technovier';
  font-size: 15px;
  line-height: 17px;
  text-transform: uppercase;
  color: ${({theme:t})=>t.addBgElementColor};
  border-radius: 5px;
  background-color: inherit;
  transition: all ${({theme:t})=>t.hoverTransition} ${({theme:t})=>t.hoverTimeFunction};

  &:hover,
  &:focus,
  &:visited {
    color: ${({theme:t})=>t.textColor};
  }

  @media ${T.tablet} {
    font-size: 18px;
    line-height: 21px;
  }
`,l1=({movieID:t,prevLocationState:c})=>e.jsxs(c1,{children:[e.jsx($,{to:`/movies/${t}/cast`,state:{...c},children:"Cast"}),e.jsx($,{to:`/movies/${t}/reviews`,state:{...c},children:"Reviews"}),e.jsx($,{to:`/movies/${t}/similar_movies`,state:{...c},children:"Similar Movies"})]}),d1=I.iframe`
  width: 360px;
  height: 230px;
  border: none;
  border-radius: 5px;

  @media ${T.tablet} {
    width: 600px;
    height: 400px;
  }
`,h1=({youtubeURL:t,movieTrailer:c})=>e.jsx(d1,{src:`${t}${c}?autoplay=0&mute=0&controls=1`,title:"video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),u1=()=>{var g,v;const{movieID:t}=A();let c=N();const h=D(),S=a.useRef("https://www.youtube.com/embed/"),[i,u]=a.useState(null),[m,w]=a.useState(!1),[d,C]=a.useState(null);a.useEffect(()=>{h.state?u(h.state):u(null)},[h.state]);const p=async s=>{if(!s){w(!1);return}if(w(!0),!d)try{const r=await E();sessionStorage.setItem("trailer",JSON.stringify(r)),r&&(console.log("TRAILER",r),C({key:r.key}))}catch(r){return y.error(`Error: ${r.message}`)}},E=async()=>{if(t)try{const s=await R(t);return console.log(s),s.find(({name:j})=>j.includes("Official"))??s[0]}catch(s){y.error(`Error: ${s.message}`)}},{data:l,error:x,isLoading:b,isError:M,isSuccess:f}=L(["movieDetails",{movieID:t}],P,{refetchOnWindowFocus:!1,staleTime:6e4,cacheTime:6e4});if(a.useEffect(()=>{if(l===404){const s=localStorage.getItem("movieID");c(`/movies/${s}`)}},[l,c]),b)return e.jsx(O,{});if(M)return y.error(`Error: ${x.message}`);if(f&&l!==404)return localStorage.setItem("movieID",JSON.stringify(+t)),e.jsxs(Z.div,{initial:"closed",animate:"open",exit:"exit",variants:V,children:[e.jsx(_,{path:((g=i==null?void 0:i.from)==null?void 0:g.location)??((v=i==null?void 0:i.from)==null?void 0:v.prevLocation)??"/",state:{from:{location:h}}}),typeof l=="object"&&e.jsx(n1,{movieData:l,handleTrailerToggle:s=>p(s)}),e.jsx(l1,{movieID:t,prevLocationState:i}),e.jsx(z,{children:m&&e.jsxs(a1,{onModal:s=>p(s),children:[d&&e.jsx(h1,{youtubeURL:S.current,movieTrailer:d.key}),!d&&e.jsxs(H,{children:[e.jsx("h2",{children:"We don't have trailer for this movie"}),e.jsx(e1,{sx:{fontSize:70,mt:1}})]})]})}),e.jsx(Q,{})]})},C1=u1,y1=Object.freeze(Object.defineProperty({__proto__:null,default:C1},Symbol.toStringTag,{value:"Module"}));export{i1 as S,o1 as a,y1 as i};
